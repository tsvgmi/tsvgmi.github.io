%link(rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous")
%link(rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous")
%link(rel="stylesheet" href="/css/ekko-lightbox.min.css")

%script(src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous")
%script(src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous")
%script(src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous")
%script(src="/js/ekko-lightbox.js")

:css
  .intro-header {
    padding-top: 50px;
    padding-bottom: 50px;
    text-align: center;
    color: #f8f8f8;
    background: url(../img/intro-bg.jpg) repeat-y center center;
  }

- StyleColor = {'bebop'=>'success', 'boston'=>'info', 'chachacha'=>'danger', 'newwave'=>'primary', 'rumba'=>'warning', 'rhumba'=>'warning', 'slow'=>'warning', 'tango'=>'success', 'techno'=>'danger', 'twist'=>'danger', 'waltz'=>'info'}
.container-fluid
  .row
    .col-md-4
      - plist.sort_by{|e| e[:href] ? e[:href].split('/')[5] : e[:name].downcase}.each_with_index do |sentry, index|
        - next unless sentry[:href]
        - pstyle   = (sentry[:pstyle] || '').downcase
        - href = sentry[:href]
        -# href = "http://localhost:4567/lyric/" + CGI.escape(sentry[:href])
        %span.pull-right= sentry[:artist]
        %a(href=href data-toggle="lightbox" data-type="url" data-width="1200" data-height="850")
          %h4
            = "#{index+1}. #{sentry[:name]}"
        %h5
          - btype  = StyleColor[pstyle] || 'secondary'
          - sclass = "small badge badge-#{btype}"
          %span(class=sclass)= sentry[:performer]
          %span(class=sclass)= sentry[:pstyle]
          %span(class=sclass)= sentry[:play_key]
        %p.text-muted= sentry[:preview]
    .col-md-8.intro-header

:javascript
  $(document).ready(function(){
    $(document).on('click', '[data-toggle="lightbox"]', function(event) {
        event.preventDefault();
        $(this).ekkoLightbox();
    });
  });
