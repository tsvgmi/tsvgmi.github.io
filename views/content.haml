%link(rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous")
%link(rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous")

%script(src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous")
%script(src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous")
%script(src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous")

:css
  .qtip {font-size:80%}
  .perfnote {background-color:#eef; border-top: 2px solid #888;}

- StyleColor = {'bebop'=>'success', 'boston'=>'info', 'chachacha'=>'danger', 'newwave'=>'primary', 'rumba'=>'warning', 'rhumba'=>'warning', 'slow'=>'warning', 'tango'=>'success', 'techno'=>'danger', 'twist'=>'danger', 'waltz'=>'info'}
.container
  %ul.list-unstyled
    - plist.sort_by{|e| e[:href].split('/')[5]}.each do |sentry|
      %li
        - btype  = StyleColor[(sentry[:pstyle] || '').downcase] || 'secondary'
        - sclass = "small badge badge-#{btype} pull-right"
        %span(class=sclass)= "#{sentry[:play_key]}"
        - if value = sentry[:play_link]
          %a.pull-right(href=value target='play_link')
            %i.fa.fa-music
            &nbsp;
        - perfnote = (sentry[:perfnote] || '').gsub(/\n/, '<br/>')
        - qref     = "<div class='small'><p><span class='badge badge-secondary'>#{sentry[:artist]}</span><span class='pull-right badge badge-primary'>#{sentry[:performer]} | #{sentry[:pstyle]}</span><p>#{sentry[:preview]}<p class=perfnote>#{perfnote}</div>"
        %a.small(href="#{sentry[:href]}" target='if_content' data-container="body" data-toggle="popover" data-placement="top" data-content=qref)= sentry[:name]


:javascript
  $(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip({"html":true}); 
    $('[data-toggle="popover"]').popover({"html":true, "trigger":"hover"});
  });
